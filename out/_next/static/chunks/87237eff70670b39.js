(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t,i,a,s=e.i(43476),n=e.i(71645);let l=(...e)=>e.filter((e,t,i)=>!!e&&""!==e.trim()&&i.indexOf(e)===t).join(" ").trim(),r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:s="",children:r,iconNode:d,...c},h)=>(0,n.createElement)("svg",{ref:h,...o,width:t,height:t,stroke:e,strokeWidth:a?24*Number(i)/Number(t):i,className:l("lucide",s),...!r&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(r)?r:[r]])),c=(e,t)=>{let i=(0,n.forwardRef)(({className:i,...a},s)=>(0,n.createElement)(d,{ref:s,iconNode:t,className:l(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...a}));return i.displayName=r(e),i},h=c("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),p=c("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),x=c("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),m=c("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),g=c("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),u=c("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),y=c("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),f=c("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),v=c("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),j=c("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var b=e.i(47167);function k(){return false}function S(e){(0,n.useEffect)(()=>{var t;e.beforeSend&&(null==(t=window.si)||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]);let t=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(t.current)e.route&&t.current(e.route);else{let i=function(e={}){var t;if(!("u">typeof window)||null===e.route)return null;window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)});let i=e.scriptSrc?e.scriptSrc:k()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":e.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":e.basePath?`${e.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js";if(document.head.querySelector(`script[src*="${i}"]`))return null;e.beforeSend&&(null==(t=window.si)||t.call(window,"beforeSend",e.beforeSend));let a=document.createElement("script");return a.src=i,a.defer=!0,a.dataset.sdkn="@vercel/speed-insights"+(e.framework?`/${e.framework}`:""),a.dataset.sdkv="1.3.1",e.sampleRate&&(a.dataset.sampleRate=e.sampleRate.toString()),e.route&&(a.dataset.route=e.route),e.endpoint?a.dataset.endpoint=e.endpoint:e.basePath&&(a.dataset.endpoint=`${e.basePath}/speed-insights/vitals`),e.dsn&&(a.dataset.dsn=e.dsn),k()&&!1===e.debug&&(a.dataset.debug="false"),a.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${i}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(a),{setRoute:e=>{a.dataset.route=e??void 0}}}({framework:e.framework??"react",basePath:e.basePath??function(){if(void 0!==b.default&&void 0!==b.default.env)return b.default.env.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}(),...e});i&&(t.current=i.setRoute)}},[e.route]),null}var N=e.i(83642);let w=c("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),z=c("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),C=c("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),I=c("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),M=c("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),A=c("fingerprint-pattern",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]),T=c("delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]),W=c("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),D=c("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var B=e.i(41202);let L=()=>{let{loginAsStaff:e,loginAsAdmin:t}=(0,N.useAuth)(),[i,a]=(0,n.useState)("role-select"),[l,r]=(0,n.useState)([]),[o,d]=(0,n.useState)(null),[c,h]=(0,n.useState)(""),[x,m]=(0,n.useState)(""),[g,u]=(0,n.useState)(""),[y,f]=(0,n.useState)(!1),[j,b]=(0,n.useState)(""),[k,S]=(0,n.useState)(!1);(0,n.useEffect)(()=>{"staff-select"===i&&0===l.length&&(0,B.fetchStaffMembers)().then(e=>r(e)).catch(()=>b("Could not load staff list."))},[i]);let L=()=>{b(""),"staff-pin"===i?(a("staff-select"),h("")):("staff-select"===i||"admin-login"===i)&&(a("role-select"),h(""),m(""),u(""))},E=()=>{h(e=>e.slice(0,-1)),b("")},R=async t=>{if(!o)return;S(!0);let{error:i}=await e(o.id,o.name,t);i&&(b(i),h("")),S(!1)},F=async e=>{if(e.preventDefault(),!x||!g)return;b(""),S(!0);let{error:i}=await t(x,g);i&&b(i),S(!1)};return"role-select"===i?(0,s.jsx)("div",{className:"login-page",children:(0,s.jsxs)("div",{className:"login-container",children:[(0,s.jsxs)("div",{className:"login-brand animate-in",children:[(0,s.jsx)("div",{className:"login-logo",children:(0,s.jsx)("span",{className:"login-logo-icon",children:"ðŸ¢"})}),(0,s.jsx)("h1",{className:"login-title",children:"SocietyClean"}),(0,s.jsx)("p",{className:"login-subtitle",children:"Management Portal"})]}),(0,s.jsxs)("div",{className:"animate-in animate-in-delay-1",style:{display:"flex",flexDirection:"column",gap:16},children:[(0,s.jsxs)("button",{className:"login-role-card",onClick:()=>a("staff-select"),children:[(0,s.jsx)("div",{className:"login-role-icon",style:{background:"var(--green-light)"},children:(0,s.jsx)(p,{size:28,color:"#059669"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"login-role-title",children:"Staff Login"}),(0,s.jsx)("div",{className:"login-role-desc",children:"Select your profile & enter PIN"})]})]}),(0,s.jsxs)("button",{className:"login-role-card",onClick:()=>a("admin-login"),children:[(0,s.jsx)("div",{className:"login-role-icon",style:{background:"var(--blue-light)"},children:(0,s.jsx)(z,{size:28,color:"#2563eb"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"login-role-title",children:"Admin Login"}),(0,s.jsx)("div",{className:"login-role-desc",children:"Sign in to manage housekeeping"})]})]})]})]})}):"staff-select"===i?(0,s.jsx)("div",{className:"login-page",children:(0,s.jsxs)("div",{className:"login-container",style:{maxWidth:420},children:[(0,s.jsxs)("div",{className:"login-header animate-in",children:[(0,s.jsx)("button",{className:"login-back-btn",onClick:L,children:(0,s.jsx)(w,{size:20})}),(0,s.jsx)("span",{className:"login-header-title",children:"Staff Login"}),(0,s.jsx)("div",{style:{width:42}})]}),(0,s.jsxs)("div",{className:"animate-in animate-in-delay-1",style:{textAlign:"center",marginBottom:28},children:[(0,s.jsx)("div",{className:"login-hero-icon",style:{background:"var(--green-light)"},children:(0,s.jsx)(p,{size:32,color:"#059669"})}),(0,s.jsx)("h2",{style:{fontSize:18,fontWeight:800,color:"var(--text-primary)",textTransform:"uppercase",letterSpacing:1,marginBottom:4},children:"Select Your Profile"}),(0,s.jsx)("p",{style:{fontSize:14,color:"var(--text-muted)",fontWeight:500},children:"Tap on your name to continue"})]}),j&&(0,s.jsx)("div",{className:"login-error",style:{marginBottom:16,textAlign:"center"},children:j}),(0,s.jsx)("div",{className:"staff-grid animate-in animate-in-delay-2",children:l.map(e=>(0,s.jsxs)("button",{className:"staff-card",onClick:()=>{d(e),h(""),b(""),a("staff-pin")},children:[(0,s.jsx)("div",{className:"staff-avatar-ring",children:(0,s.jsx)("img",{src:e.avatar,alt:e.name,className:"staff-avatar-img"})}),(0,s.jsx)("div",{className:"staff-card-name",children:e.name}),(0,s.jsx)("div",{className:"staff-card-info",children:e.blockAssignment})]},e.id))}),0===l.length&&!j&&(0,s.jsxs)("div",{style:{textAlign:"center",padding:40},children:[(0,s.jsx)(v,{size:28,className:"spin",style:{color:"var(--blue)"}}),(0,s.jsx)("div",{style:{marginTop:12,fontSize:13,color:"var(--text-muted)"},children:"Loading staff..."})]})]})}):"staff-pin"===i?(0,s.jsx)("div",{className:"login-page",children:(0,s.jsxs)("div",{className:"login-container",style:{maxWidth:380},children:[(0,s.jsxs)("div",{className:"login-header animate-in",children:[(0,s.jsx)("button",{className:"login-back-btn",onClick:L,children:(0,s.jsx)(w,{size:20})}),(0,s.jsx)("span",{className:"login-header-title",children:"Staff Login"}),(0,s.jsx)("div",{style:{width:42}})]}),(0,s.jsxs)("div",{className:"animate-in animate-in-delay-1",style:{textAlign:"center",marginBottom:24},children:[(0,s.jsx)("div",{className:"pin-avatar-ring",children:(0,s.jsx)("img",{src:o?.avatar,alt:o?.name,className:"pin-avatar-img"})}),(0,s.jsx)("h2",{style:{fontSize:22,fontWeight:800,color:"var(--text-primary)",marginBottom:2},children:o?.name}),(0,s.jsx)("button",{className:"pin-change-profile",onClick:L,children:"Tap to change profile"})]}),(0,s.jsxs)("div",{className:"animate-in animate-in-delay-2",style:{textAlign:"center",marginBottom:20},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,marginBottom:16},children:[(0,s.jsx)(A,{size:18,color:"var(--text-muted)"}),(0,s.jsx)("span",{style:{fontSize:13,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:"var(--text-muted)"},children:"Enter PIN"})]}),(0,s.jsx)("div",{className:"pin-dots",children:[0,1,2,3].map(e=>(0,s.jsx)("div",{className:`pin-dot ${e<c.length?"filled":""}`},e))}),j&&(0,s.jsx)("div",{style:{fontSize:13,fontWeight:600,color:"var(--coral)",marginTop:8},children:j}),(0,s.jsx)("div",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)",marginTop:8},children:"Default PIN: 1234"})]}),(0,s.jsx)("div",{className:"pin-keypad animate-in animate-in-delay-3",children:["1","2","3","4","5","6","7","8","9","","0","del"].map((e,t)=>""===e?(0,s.jsx)("div",{className:"pin-key-spacer"},t):"del"===e?(0,s.jsx)("button",{className:"pin-key pin-key-del",onClick:E,children:(0,s.jsx)(T,{size:22})},t):(0,s.jsx)("button",{className:"pin-key",onClick:()=>(e=>{if(c.length>=4)return;let t=c+e;h(t),b(""),4===t.length&&o&&R(t)})(e),children:e},t))}),k&&(0,s.jsx)("div",{style:{textAlign:"center",marginTop:20},children:(0,s.jsx)(v,{size:28,className:"spin",style:{color:"var(--blue)"}})})]})}):(0,s.jsx)("div",{className:"login-page",children:(0,s.jsxs)("div",{className:"login-container",style:{maxWidth:380},children:[(0,s.jsxs)("div",{className:"login-header animate-in",children:[(0,s.jsx)("button",{className:"login-back-btn",onClick:L,children:(0,s.jsx)(w,{size:20})}),(0,s.jsx)("span",{className:"login-header-title",children:"Admin Login"}),(0,s.jsx)("div",{style:{width:42}})]}),(0,s.jsxs)("div",{className:"animate-in animate-in-delay-1",style:{textAlign:"center",marginBottom:32},children:[(0,s.jsx)("div",{className:"login-hero-icon login-hero-icon-lg",style:{background:"var(--blue-light)"},children:(0,s.jsx)(z,{size:36,color:"#2563eb"})}),(0,s.jsx)("h2",{style:{fontSize:24,fontWeight:800,color:"var(--text-primary)",marginBottom:4},children:"Admin Access"}),(0,s.jsx)("p",{style:{fontSize:14,color:"var(--text-muted)",fontWeight:500},children:"Sign in to manage your society housekeeping"})]}),(0,s.jsxs)("form",{onSubmit:F,className:"animate-in animate-in-delay-2",children:[(0,s.jsxs)("div",{className:"neu-input-group",style:{marginBottom:16},children:[(0,s.jsx)("label",{className:"neu-label",children:"Username"}),(0,s.jsxs)("div",{className:"neu-input-wrapper",children:[(0,s.jsx)(W,{size:18,style:{position:"absolute",left:14,color:"var(--text-muted)",zIndex:1}}),(0,s.jsx)("input",{type:"text",className:"neu-input",style:{paddingLeft:42},placeholder:"Enter username",value:x,onChange:e=>m(e.target.value),required:!0})]})]}),(0,s.jsxs)("div",{className:"neu-input-group",style:{marginBottom:12},children:[(0,s.jsx)("label",{className:"neu-label",children:"Password"}),(0,s.jsxs)("div",{className:"neu-input-wrapper",children:[(0,s.jsx)(D,{size:18,style:{position:"absolute",left:14,color:"var(--text-muted)",zIndex:1}}),(0,s.jsx)("input",{type:y?"text":"password",className:"neu-input",style:{paddingLeft:42},placeholder:"Enter password",value:g,onChange:e=>u(e.target.value),required:!0}),(0,s.jsx)("button",{type:"button",className:"neu-input-action",onClick:()=>f(!y),children:y?(0,s.jsx)(I,{size:16}):(0,s.jsx)(C,{size:16})})]})]}),(0,s.jsx)("div",{style:{textAlign:"center",marginBottom:20},children:(0,s.jsx)("span",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)"},children:"Default: admin / admin123"})}),j&&(0,s.jsx)("div",{className:"login-error",style:{marginBottom:16},children:j}),(0,s.jsx)("button",{type:"submit",className:"neu-btn-login",disabled:k,children:k?(0,s.jsx)(v,{size:20,className:"spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(M,{size:20})," Sign In"]})})]})]})})};(t={}).MANAGER="MANAGER",t.STAFF="STAFF";var E=((i={}).GARBAGE_COLLECTION="Garbage Collection",i.BROOMING="Brooming",i.MOPPING="Mopping",i.DRIVEWAY="Driveway Cleaning",i.GLASS_CLEANING="Glass Cleaning",i.STAIRCASE="Staircase Cleaning",i),R=((a={}).DAILY="Daily",a.WEEKLY="Weekly",a);let F=[1,2,3,4,5,6,7,8,9,10,11,12],O=e=>()=>e,P=[{block:1,label:"Block 1",flatsPerFloor:e=>e<=8?["A","B","C","D","E","F"]:["A","B","C"]},{block:2,label:"Block 2",flatsPerFloor:O(["A","B","C","D"])},{block:3,label:"Block 3",flatsPerFloor:O(["A","B","C","D","E"])},{block:4,label:"Block 4",flatsPerFloor:O(["A","B","C","D","E"])},{block:5,label:"Block 5",flatsPerFloor:O(["A","B","C","D","E"])},{block:6,label:"Block 6",flatsPerFloor:O(["A","B","C","D"])}],$=[{type:"Garbage Collection",label:"Garbage Collection",icon:"ðŸ—‘ï¸",perFlat:!0},{type:"Brooming",label:"Lobby Brooming",icon:"ðŸ§¹",perFlat:!1},{type:"Mopping",label:"Floor Mopping",icon:"ðŸ§¼",perFlat:!1},{type:"Staircase Cleaning",label:"Staircase Cleaning",icon:"ðŸªœ",perFlat:!1}],H=[{id:"glass-entrance",type:"Glass Cleaning",label:"Entrance Glass Cleaning",icon:"ðŸªŸ"}],G=[{id:"driveway-broom",type:"Driveway Cleaning",label:"Driveway Cleaning",icon:"ðŸš—",area:"Society Driveway"}],q=c("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),U=c("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_=c("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),V=c("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),K=({percentage:e,size:t=160,strokeWidth:i=14})=>{let a=(t-i)/2,n=2*Math.PI*a;return(0,s.jsxs)("div",{className:"progress-ring-container",style:{width:t,height:t},children:[(0,s.jsxs)("svg",{width:t,height:t,style:{transform:"rotate(-90deg)"},children:[(0,s.jsx)("circle",{cx:t/2,cy:t/2,r:a,fill:"none",stroke:"var(--neu-dark)",strokeWidth:i}),(0,s.jsx)("circle",{cx:t/2,cy:t/2,r:a,fill:"none",stroke:"url(#gradient)",strokeWidth:i,strokeDasharray:n,strokeDashoffset:n-e/100*n,strokeLinecap:"round",style:{transition:"stroke-dashoffset 1s ease-out"}}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#3b82f6"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#10b981"})]})})]}),(0,s.jsxs)("div",{style:{position:"absolute",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,s.jsx)("div",{style:{width:48,height:48,borderRadius:14,background:"var(--blue-light)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:6},children:(0,s.jsx)(V,{size:22,color:"#3b82f6"})}),(0,s.jsx)("span",{style:{fontSize:10,fontWeight:700,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:.5},children:"Live Feed"})]})]})},Y=({icon:e,title:t,desc:i,bgColor:a})=>(0,s.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",gap:14,padding:"18px 18px",cursor:"pointer"},children:[(0,s.jsx)("div",{style:{width:46,height:46,borderRadius:14,background:a,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,s.jsx)("span",{style:{fontSize:22},children:e})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontSize:15,fontWeight:700,color:"var(--text-primary)"},children:t}),(0,s.jsx)("div",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)"},children:i})]})]}),J=({item:e,requester:t,time:i,onApprove:a,onReject:n})=>(0,s.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",gap:12,padding:"16px 18px"},children:[(0,s.jsx)("div",{style:{width:42,height:42,borderRadius:14,background:"var(--green-light)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,s.jsx)("span",{style:{fontSize:18},children:"ðŸ“¦"})}),(0,s.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,s.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e}),(0,s.jsxs)("div",{style:{fontSize:11,fontWeight:500,color:"var(--text-muted)"},children:["Requested by ",t," Â· ",i]})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:8,flexShrink:0},children:[(0,s.jsx)("button",{onClick:n,className:"btn-approve",style:{background:"var(--coral-light)",color:"var(--coral)"},children:(0,s.jsx)(U,{size:14})}),(0,s.jsx)("button",{onClick:a,className:"btn-approve",style:{background:"var(--green-light)",color:"var(--green)"},children:(0,s.jsx)(q,{size:14})})]})]}),Z=({logs:e,tasks:t,supplyRequests:i,onApproveSupply:a,staffMembers:n})=>{let l=new Date().setHours(0,0,0,0),r=e.filter(e=>e.timestamp>=l),o=t.filter(e=>e.frequency===R.DAILY).length,d=r.filter(e=>{let i=t.find(t=>t.id===e.taskId);return i?.frequency===R.DAILY&&"REJECTED"!==e.status}).length,c=o>0?Math.round(d/o*100):74,h=t.filter(e=>e.type.includes("Garbage")),p=r.filter(e=>h.some(t=>t.id===e.taskId)).length,x=h.length>0?Math.round(p/h.length*100):82,m=t.filter(e=>e.type.includes("Brooming")),g=r.filter(e=>m.some(t=>t.id===e.taskId)).length,u=m.length>0?Math.round(g/m.length*100):66,y=i.filter(e=>"OPEN"===e.status);return(0,s.jsxs)("div",{style:{paddingBottom:16},children:[(0,s.jsxs)("div",{className:"animate-in",style:{marginBottom:24},children:[(0,s.jsxs)("div",{className:"section-header",children:[(0,s.jsx)("span",{className:"section-title",children:"On-Duty Staff"}),(0,s.jsx)("button",{className:"btn-ghost",style:{fontSize:13,fontWeight:600,color:"var(--blue)",padding:"4px 8px"},children:"View All"})]}),(0,s.jsx)("div",{style:{display:"flex",gap:20,overflowX:"auto",paddingBottom:4},className:"no-scrollbar",children:n.map(e=>(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6,minWidth:72},children:[(0,s.jsx)("img",{src:e.avatar,alt:e.name,className:"avatar avatar-lg",style:{width:56,height:56}}),(0,s.jsxs)("span",{style:{fontSize:12,fontWeight:600,color:"var(--text-primary)",textAlign:"center",lineHeight:1.2},children:[e.name.split(" ")[0]," ",e.name.split(" ")[1]?.[0],"."]}),(0,s.jsx)("span",{style:{fontSize:10,fontWeight:500,color:"var(--text-muted)"},children:e.blockAssignment})]},e.id))})]}),(0,s.jsxs)("div",{className:"neu-card-inset animate-in animate-in-delay-1",style:{marginBottom:24,textAlign:"center",padding:24},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:16},children:[(0,s.jsx)("span",{className:"section-title",children:"Daily Progress"}),(0,s.jsxs)("div",{style:{textAlign:"right"},children:[(0,s.jsxs)("div",{style:{fontSize:28,fontWeight:800,color:"var(--text-primary)",lineHeight:1},children:[c,"%"]}),(0,s.jsx)("div",{style:{fontSize:11,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:.5},children:"Average"})]})]}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:16},children:(0,s.jsx)(K,{percentage:c})}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:24},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,s.jsx)("div",{style:{width:8,height:8,borderRadius:"50%",background:"var(--green)"}}),(0,s.jsxs)("span",{style:{fontSize:12,fontWeight:600,color:"var(--text-secondary)"},children:["Garbage: ",x,"%"]})]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,s.jsx)("div",{style:{width:8,height:8,borderRadius:"50%",background:"var(--blue)"}}),(0,s.jsxs)("span",{style:{fontSize:12,fontWeight:600,color:"var(--text-secondary)"},children:["Brooming: ",u,"%"]})]})]})]}),(0,s.jsxs)("div",{className:"animate-in animate-in-delay-2",style:{marginBottom:24},children:[(0,s.jsxs)("div",{className:"section-header",children:[(0,s.jsx)("span",{className:"section-title",children:"Supplies Status"}),y.length>0&&(0,s.jsxs)("span",{className:"badge badge-green",children:[y.length," New Requests"]})]}),(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:0===y.length&&0===i.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(J,{item:"Cleaning Liquid (5L)",requester:"Ravi",time:"10m ago",onApprove:()=>{},onReject:()=>{}}),(0,s.jsx)(J,{item:"New Heavy Broom",requester:"Anita",time:"45m ago",onApprove:()=>{},onReject:()=>{}})]}):y.map(e=>{let t=n.find(t=>t.id===e.requesterId),i=Math.round((Date.now()-e.timestamp)/6e4);return(0,s.jsx)(J,{item:`${e.item} (${e.quantity})`,requester:t?.name.split(" ")[0]||"Staff",time:`${i}m ago`,onApprove:()=>a(e.id),onReject:()=>{}},e.id)})})]}),(0,s.jsxs)("div",{className:"animate-in animate-in-delay-3",style:{marginBottom:24},children:[(0,s.jsx)("div",{className:"section-header",children:(0,s.jsx)("span",{className:"section-title",children:"Zone Monitoring"})}),(0,s.jsx)("div",{className:"neu-card",style:{padding:0,overflow:"hidden",position:"relative",height:180},children:(0,s.jsxs)("div",{style:{width:"100%",height:"100%",background:"linear-gradient(135deg, var(--blue-bg) 0%, var(--green-bg) 50%, var(--yellow-bg) 100%)",display:"flex",alignItems:"flex-end",justifyContent:"space-between",padding:16,position:"relative"},children:[(0,s.jsx)("div",{style:{position:"absolute",top:40,left:"30%",width:12,height:12,borderRadius:"50%",background:"var(--blue)",boxShadow:"0 0 0 4px rgba(59,130,246,0.2)"}}),(0,s.jsx)("div",{style:{position:"absolute",top:70,left:"50%",width:12,height:12,borderRadius:"50%",background:"var(--coral)",boxShadow:"0 0 0 4px rgba(249,112,102,0.2)"}}),(0,s.jsx)("div",{style:{position:"absolute",top:55,left:"65%",width:12,height:12,borderRadius:"50%",background:"var(--green)",boxShadow:"0 0 0 4px rgba(16,185,129,0.2)"}}),(0,s.jsx)("div",{style:{position:"absolute",top:90,left:"40%",width:12,height:12,borderRadius:"50%",background:"var(--yellow)",boxShadow:"0 0 0 4px rgba(245,158,11,0.2)"}}),(0,s.jsxs)("div",{style:{background:"rgba(255,255,255,0.85)",borderRadius:10,padding:"8px 14px",fontSize:11,fontWeight:700,color:"var(--text-secondary)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",gap:4,boxShadow:"var(--neu-raised-sm)"},children:[(0,s.jsx)(_,{size:12})," Live Zone Coverage"]}),(0,s.jsx)("button",{style:{width:46,height:46,borderRadius:"50%",background:"var(--blue)",color:"white",border:"none",cursor:"pointer",fontSize:22,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 14px rgba(59,130,246,0.4)"},children:"+"})]})})]}),(0,s.jsxs)("div",{className:"animate-in animate-in-delay-4",style:{marginBottom:20},children:[(0,s.jsx)("div",{className:"section-header",children:(0,s.jsx)("span",{className:"section-title",children:"Management Hub"})}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:14},children:[(0,s.jsx)(Y,{icon:"ðŸ‘¤",title:"Manage Staff",desc:"Add, edit profiles & schedules",color:"var(--purple)",bgColor:"var(--purple-light)"}),(0,s.jsx)(Y,{icon:"ðŸ“¦",title:"Inventory Management",desc:"Restock alerts & tracking",color:"var(--coral)",bgColor:"var(--coral-light)"}),(0,s.jsx)(Y,{icon:"ðŸ“‹",title:"System Logs",desc:"View all system activities",color:"var(--green)",bgColor:"var(--green-light)"}),(0,s.jsx)("button",{className:"neu-card",style:{textAlign:"center",padding:"18px 16px",cursor:"pointer",width:"100%",fontSize:15,fontWeight:700,color:"var(--text-primary)",fontFamily:"inherit",borderRadius:"var(--radius)",border:"none"},children:"Export Monthly Report"})]})]})]})},Q=c("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),X=c("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ee=c("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),et=async(e,t="societyclean/proof-of-work")=>{let i=e.startsWith("data:")?e:`data:image/jpeg;base64,${e}`,a=new FormData;a.append("file",i),a.append("upload_preset","ml_default"),a.append("folder",t);let s=await fetch("https://api.cloudinary.com/v1_1/demodqx39/image/upload",{method:"POST",body:a});if(!s.ok){let e=await s.text();throw Error(`Cloudinary upload failed (${s.status}): ${e}`)}let n=await s.json();return{secure_url:n.secure_url,public_id:n.public_id,width:n.width,height:n.height,format:n.format,created_at:n.created_at}};async function ei(e,t){return new Promise((i,a)=>{let s=new Image;s.onload=()=>{let a=document.createElement("canvas");a.width=s.width,a.height=s.height;let n=a.getContext("2d");if(!n)return void i(e);n.drawImage(s,0,0);let l=new Date,r=l.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),o=l.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),d=`${r}  ${o}`,c=Math.max(14,Math.round(.035*s.width));n.font=`bold ${c}px 'Arial', sans-serif`;let h=Math.round(.5*c),p=Math.round(1.2*c),x=n.measureText(d).width;t&&(x=Math.max(x,n.measureText(t).width));let m=t?2*p:p,g=s.width-x-2*h,u=s.height-m-2*h;n.fillStyle="rgba(0, 0, 0, 0.6)",n.beginPath(),n.roundRect(g-h,u-h,x+2*h,m+2*h,6),n.fill(),n.fillStyle="#ffffff",n.textBaseline="top",t?(n.fillText(t,g,u),n.fillText(d,g,u+p)):n.fillText(d,g,u),i(a.toDataURL("image/jpeg",.9))},s.onerror=()=>i(e),s.src=e})}var ea=e.i(88715);let es=null;es=(0,ea.createClient)("https://bhdrlzaqejkrqsozbcbr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJoZHJsemFxZWprcnFzb3piY2JyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4NzM4OTAsImV4cCI6MjA4NTQ0OTg5MH0.W1kWS99fv-QjQI_eVE3XvPhMWbgMQoGqOtaUHcVlP9s");let en=async()=>{if(!es)return new Map;let e=new Date,t=e.toLocaleString("default",{month:"long"}),i=e.getFullYear(),a=`${t}_${i}`,{data:s,error:n}=await es.from("Collections_2026").select(`Flat_No, ${a}`);if(n)return console.error("Error fetching payment status:",n),new Map;let l=new Map;return s.forEach(e=>{let t=e.Flat_No?.trim();if(!t)return;let i=e[a],s=0===i||"0"===i||"string"==typeof i&&"N/A"===i.trim().toUpperCase();l.set(t,!s)}),l},el=({currentUser:e,logs:t,onLogTask:i,staffMembers:a})=>{let l,[r,o]=(0,n.useState)("blocks"),[d,c]=(0,n.useState)(null),[h,p]=(0,n.useState)(null),[x,m]=(0,n.useState)(!1),[g,u]=(0,n.useState)(null),[y,f]=(0,n.useState)(null),[j,b]=(0,n.useState)(!1),k=(0,n.useRef)(null),S=(0,n.useRef)(null),N=(0,n.useRef)(null),[z,C]=(0,n.useState)(new Map),[I,M]=(0,n.useState)(!0);(0,n.useEffect)(()=>{en().then(e=>{C(e),M(!1)})},[]);let A=a.find(t=>t.id===e),T=new Date().setHours(0,0,0,0),W=t.filter(e=>e.timestamp>=T),D=(e,t,i,a)=>W.some(s=>s.block===e&&s.floor===t&&s.taskId===i&&(a?s.flat===a:!s.flat)),B=(e,t)=>W.some(i=>i.taskId===e&&i.block===t),L=()=>{"tasks"===r?(o("floors"),p(null)):"floors"===r&&(o("blocks"),c(null))},E=async(e,t,i,a)=>{f({taskId:e,taskType:t,flat:i,block:a}),b(!0);try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});S.current=e,setTimeout(()=>{k.current&&(k.current.srcObject=e,k.current.play())},100)}catch(e){console.error("Camera error:",e),alert("Unable to access camera. Please ensure you have granted camera permissions and are using HTTPS or localhost."),b(!1),f(null)}},R=(0,n.useCallback)(()=>{S.current&&(S.current.getTracks().forEach(e=>e.stop()),S.current=null),b(!1)},[]),O=async()=>{if(!k.current||!N.current||!y)return;let t=k.current,a=N.current;a.width=t.videoWidth,a.height=t.videoHeight;let s=a.getContext("2d");if(!s)return;s.drawImage(t,0,0),R();let n=a.toDataURL("image/jpeg",.85);u(`${y.taskType}-${y.flat||"area"}`),m(!0);let l=n;try{let e="";if(y.flat&&d)e=`Block ${d.block} - Flat ${y.flat} (Floor ${h})`;else if(h&&d)e=`Block ${d.block} - Floor ${h}`;else if(y.block)e=`Block ${y.block}`;else{let t=G.find(e=>e.id===y.taskId);e=t?t.area:"Common Area"}let t=await ei(n,e),i=A?.name.replace(/\s+/g,"_")||"unknown",a=d?`B${d.block}`:"Common",s=h?`/F${h}`:"",r=`societyclean/${a}${s}/${i}`;l=(await et(t,r)).secure_url}catch{}i({taskId:y.taskId,staffId:e,timestamp:Date.now(),status:"COMPLETED",imageUrl:l,block:y.block||(d?d.block:void 0),floor:h||void 0,flat:y.flat||void 0}),m(!1),u(null),f(null)};return(0,s.jsxs)("div",{style:{paddingBottom:16},children:["blocks"===r&&(l=W.length,(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"neu-card animate-in",style:{marginBottom:22,padding:20,display:"flex",alignItems:"center",gap:16},children:[(0,s.jsx)("div",{style:{width:54,height:54,borderRadius:"50%",background:"linear-gradient(135deg, var(--blue), var(--purple))",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:16,fontWeight:800,flexShrink:0,boxShadow:"0 4px 14px rgba(99, 102, 241, 0.3)"},children:l}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontSize:16,fontWeight:700,color:"var(--text-primary)"},children:A?`Hi, ${A.name}`:"My Tasks"}),(0,s.jsxs)("div",{style:{fontSize:13,fontWeight:500,color:"var(--text-secondary)"},children:[l," tasks completed today"]})]})]}),(0,s.jsxs)("div",{className:"section-header animate-in animate-in-delay-1",children:[(0,s.jsx)("span",{style:{fontSize:17,fontWeight:700,color:"var(--text-primary)"},children:"Select Block"}),(0,s.jsx)("span",{className:"section-label",children:"6 BLOCKS"})]}),(0,s.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:14,marginBottom:24},className:"animate-in animate-in-delay-1",children:P.map((e,t)=>{let{done:i,total:a}=(e=>{let t=P.find(t=>t.block===e);if(!t)return{done:0,total:0};let i=0,a=0;return F.forEach(s=>{let n=t.flatsPerFloor(s),l=$.filter(e=>e.perFlat);i+=l.length*n.length,a+=l.reduce((t,i)=>t+n.filter(t=>D(e,s,i.type,t)).length,0);let r=$.filter(e=>!e.perFlat);i+=r.length,a+=r.filter(t=>D(e,s,t.type)).length}),i+=H.length,{done:a+=H.filter(t=>B(t.id,e)).length,total:i}})(e.block),n=a>0?Math.round(i/a*100):0;return(0,s.jsxs)("button",{onClick:()=>{c(e),o("floors")},className:"neu-card",style:{cursor:"pointer",textAlign:"center",padding:22,display:"flex",flexDirection:"column",alignItems:"center",gap:10,border:"none",fontFamily:"inherit",transition:"all 0.2s ease",animationDelay:`${60*t}ms`},children:[(0,s.jsx)("div",{style:{width:52,height:52,borderRadius:16,background:100===n?"linear-gradient(135deg, #10b981, #059669)":`linear-gradient(135deg, ${["#6366f1","#3b82f6","#f97316","#06b6d4","#8b5cf6","#ec4899"][t]}, ${["#818cf8","#60a5fa","#fb923c","#22d3ee","#a78bfa","#f472b6"][t]})`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",boxShadow:`0 4px 14px ${["rgba(99,102,241,0.3)","rgba(59,130,246,0.3)","rgba(249,115,22,0.3)","rgba(6,182,212,0.3)","rgba(139,92,246,0.3)","rgba(236,72,153,0.3)"][t]}`},children:(0,s.jsx)(ee,{size:24})}),(0,s.jsxs)("span",{style:{fontSize:15,fontWeight:700,color:"var(--text-primary)"},children:["Block ",e.block]}),(0,s.jsxs)("div",{style:{fontSize:11,fontWeight:600,color:100===n?"var(--green)":"var(--text-muted)"},children:[i,"/",a," done"]}),(0,s.jsx)("div",{style:{width:"100%",height:4,borderRadius:2,background:"var(--bg-inset)",overflow:"hidden"},children:(0,s.jsx)("div",{style:{width:`${n}%`,height:"100%",borderRadius:2,background:100===n?"var(--green)":"var(--blue)",transition:"width 0.3s"}})})]},e.block)})}),(0,s.jsxs)("div",{className:"section-header animate-in animate-in-delay-2",children:[(0,s.jsx)("span",{style:{fontSize:17,fontWeight:700,color:"var(--text-primary)"},children:"Common Areas"}),(0,s.jsx)("span",{className:"section-label",children:"DAILY"})]}),(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},className:"animate-in animate-in-delay-2",children:G.map(e=>{let t,i=(t=e.id,W.some(e=>e.taskId===t));return(0,s.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",gap:14,padding:"14px 18px"},children:[(0,s.jsx)("span",{style:{fontSize:22},children:e.icon}),(0,s.jsxs)("div",{style:{flex:1},children:[(0,s.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)"},children:e.label}),(0,s.jsx)("div",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)"},children:e.area})]}),i?(0,s.jsx)("div",{className:"check-circle done",children:(0,s.jsx)(q,{size:14})}):(0,s.jsxs)("button",{onClick:()=>E(e.id,e.type),style:{background:"var(--blue)",color:"white",border:"none",borderRadius:10,padding:"8px 14px",fontSize:12,fontWeight:700,cursor:"pointer",fontFamily:"inherit",display:"flex",alignItems:"center",gap:6},children:[(0,s.jsx)(Q,{size:14})," Capture"]})]},e.id)})})]})),"floors"===r&&(d?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:20},className:"animate-in",children:[(0,s.jsx)("button",{onClick:L,className:"btn-icon",style:{flexShrink:0},children:(0,s.jsx)(w,{size:20})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:"var(--text-muted)"},children:d.label}),(0,s.jsx)("div",{style:{fontSize:18,fontWeight:800,color:"var(--text-primary)"},children:"Select Floor"})]})]}),(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:F.map((e,t)=>{let i=d.flatsPerFloor(e).filter(t=>{let i=`${d.block}${t}${e}`;return z.has(i)&&!0===z.get(i)}),a=0,n=0;if(i.length>0){let t=$.filter(e=>e.perFlat);a+=t.length*i.length,n+=t.reduce((t,a)=>t+i.filter(t=>D(d.block,e,a.type,t)).length,0);let s=$.filter(e=>!e.perFlat);a+=s.length,n+=s.filter(t=>D(d.block,e,t.type)).length}let l=!I&&0===i.length,r=!I&&i.length>0&&n===a,c=a>0?Math.round(n/a*100):0;return(0,s.jsxs)("button",{onClick:()=>{p(e),o("tasks")},className:"neu-card animate-in",style:{display:"flex",alignItems:"center",gap:14,padding:"14px 18px",cursor:"pointer",textAlign:"left",width:"100%",border:"none",fontFamily:"inherit",transition:"all 0.2s ease",animationDelay:`${40*t}ms`,opacity:r?.7:1,...l?{background:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--red)"}:{}},children:[(0,s.jsx)("div",{style:{width:42,height:42,borderRadius:12,flexShrink:0,background:r?"var(--green-light)":l?"var(--red)":"var(--bg-inset)",display:"flex",alignItems:"center",justifyContent:"center",color:r?"var(--green)":l?"white":"var(--text-muted)",fontWeight:800,fontSize:16},children:l?(0,s.jsx)(U,{size:20}):e}),(0,s.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,s.jsxs)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)"},children:["Floor ",e]}),(0,s.jsx)("div",{style:{fontSize:12,fontWeight:500,color:l?"var(--red)":"var(--text-muted)"},children:l?"No serviceable flats":`${i.length} flats \xb7 ${n}/${a} tasks`})]}),(0,s.jsx)("div",{style:{width:44,textAlign:"right"},children:r?(0,s.jsx)("div",{className:"check-circle done",children:(0,s.jsx)(q,{size:14})}):l?(0,s.jsx)("span",{style:{fontSize:11,fontWeight:700,color:"var(--red)"},children:"LOCKED"}):(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4,color:"var(--text-muted)"},children:[(0,s.jsx)("span",{style:{fontSize:12,fontWeight:700},children:I?"...":`${c}%`}),(0,s.jsx)(X,{size:16})]})})]},e)})}),(0,s.jsxs)("div",{className:"section-header animate-in animate-in-delay-1",style:{marginTop:20},children:[(0,s.jsx)("span",{style:{fontSize:15,fontWeight:700,color:"var(--text-primary)"},children:"Block Tasks"}),(0,s.jsx)("span",{className:"section-label",children:"DAILY"})]}),(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},className:"animate-in animate-in-delay-2",children:H.map(e=>{let t=B(e.id,d.block);return(0,s.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",gap:14,padding:"14px 18px"},children:[(0,s.jsx)("span",{style:{fontSize:22},children:e.icon}),(0,s.jsxs)("div",{style:{flex:1},children:[(0,s.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)"},children:e.label}),(0,s.jsxs)("div",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)"},children:[d.label," Entrance"]})]}),t?(0,s.jsx)("div",{className:"check-circle done",children:(0,s.jsx)(q,{size:14})}):(0,s.jsxs)("button",{onClick:()=>E(e.id,e.type,void 0,d.block),style:{background:"var(--blue)",color:"white",border:"none",borderRadius:10,padding:"8px 14px",fontSize:12,fontWeight:700,cursor:"pointer",fontFamily:"inherit",display:"flex",alignItems:"center",gap:6},children:[(0,s.jsx)(Q,{size:14})," Capture"]})]},e.id)})})]}):null),"tasks"===r&&(()=>{if(!d||!h)return null;let e=d.flatsPerFloor(h);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:20},className:"animate-in",children:[(0,s.jsx)("button",{onClick:L,className:"btn-icon",style:{flexShrink:0},children:(0,s.jsx)(w,{size:20})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:"var(--text-muted)"},children:[d.label," Â· Floor ",h]}),(0,s.jsx)("div",{style:{fontSize:18,fontWeight:800,color:"var(--text-primary)"},children:"Floor Tasks"})]})]}),$.filter(e=>e.perFlat).map(t=>(0,s.jsxs)("div",{className:"animate-in animate-in-delay-1",style:{marginBottom:22},children:[(0,s.jsxs)("div",{className:"section-header",children:[(0,s.jsxs)("span",{style:{fontSize:15,fontWeight:700,color:"var(--text-primary)"},children:[t.icon," ",t.label]}),(0,s.jsxs)("span",{className:"section-label",children:[e.length," FLATS"]})]}),(0,s.jsx)("div",{style:{display:"grid",gridTemplateColumns:`repeat(${Math.min(e.length,4)}, 1fr)`,gap:10},children:e.map(e=>{let i=D(d.block,h,t.type,e),a=`${d.block}${e}${h}`,n=z.has(a),l=!!n&&z.get(a),r=n&&!l,o=!n,c=g===`${t.type}-${e}`;return(0,s.jsxs)("button",{onClick:()=>{i||c||r||o||E(t.type,t.type,e,d.block)},disabled:i||c||r||o,className:i?"neu-card":"neu-card-inset",style:{padding:"14px 8px",border:r?"1px solid var(--red)":o?"1px dashed var(--text-muted)":"none",fontFamily:"inherit",cursor:i||r||o?"default":"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:6,opacity:i||r||o?.7:1,transition:"all 0.2s",background:i?"var(--green-light)":r?"rgba(239, 68, 68, 0.1)":o?"rgba(0,0,0,0.05)":void 0},children:[c?(0,s.jsx)(v,{size:20,className:"spin",style:{color:"var(--blue)"}}):i?(0,s.jsx)(q,{size:20,style:{color:"var(--green)"}}):r?(0,s.jsx)(U,{size:20,style:{color:"var(--red)"}}):o?(0,s.jsx)("div",{style:{width:18,height:18}}):(0,s.jsx)(Q,{size:18,style:{color:"var(--text-muted)"}}),(0,s.jsx)("span",{style:{fontSize:13,fontWeight:700,color:i?"var(--green)":r?"var(--red)":o?"var(--text-muted)":"var(--text-primary)"},children:e}),(0,s.jsx)("span",{style:{fontSize:10,fontWeight:600,color:r?"var(--red)":"var(--text-muted)"},children:i?"Done":r?"Unpaid":o?"N/A":"Tap"})]},e)})})]},t.type)),(0,s.jsxs)("div",{className:"animate-in animate-in-delay-2",style:{marginBottom:22},children:[(0,s.jsxs)("div",{className:"section-header",children:[(0,s.jsx)("span",{style:{fontSize:15,fontWeight:700,color:"var(--text-primary)"},children:"Area Tasks"}),(0,s.jsx)("span",{className:"section-label",children:"LOBBY & STAIRCASE"})]}),(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:$.filter(e=>!e.perFlat).map(e=>{let t=D(d.block,h,e.type),i=`${e.type}-area`;return(0,s.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",gap:14,padding:"14px 18px"},children:[(0,s.jsx)("span",{style:{fontSize:22},children:e.icon}),(0,s.jsxs)("div",{style:{flex:1},children:[(0,s.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)"},children:e.label}),(0,s.jsxs)("div",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)"},children:[d.label," Â· Floor ",h]})]}),t?(0,s.jsx)("div",{className:"check-circle done",children:(0,s.jsx)(q,{size:14})}):g===i?(0,s.jsx)(v,{size:20,className:"spin",style:{color:"var(--blue)"}}):(0,s.jsxs)("button",{onClick:()=>E(e.type,e.type,void 0,d.block),className:"btn-primary",style:{background:"var(--blue)",color:"white",border:"none",borderRadius:10,padding:"8px 16px",fontSize:13,fontWeight:700,cursor:"pointer",fontFamily:"inherit",display:"flex",alignItems:"center",gap:8},children:[(0,s.jsx)(Q,{size:16})," Capture Proof"]})]},e.type)})})]})]})})(),j?(0,s.jsxs)("div",{style:{position:"fixed",inset:0,zIndex:9999,background:"#000",display:"flex",flexDirection:"column"},children:[(0,s.jsx)("video",{ref:k,autoPlay:!0,playsInline:!0,muted:!0,style:{flex:1,width:"100%",objectFit:"cover"}}),(0,s.jsx)("canvas",{ref:N,style:{display:"none"}}),(0,s.jsxs)("div",{style:{position:"absolute",bottom:0,left:0,right:0,padding:"24px 0 40px",display:"flex",justifyContent:"center",alignItems:"center",background:"linear-gradient(transparent, rgba(0,0,0,0.8))"},children:[(0,s.jsx)("button",{onClick:()=>{R(),f(null)},style:{position:"absolute",left:24,top:24,background:"rgba(255,255,255,0.15)",border:"none",borderRadius:"50%",width:44,height:44,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",backdropFilter:"blur(8px)"},children:(0,s.jsx)(U,{size:22,style:{color:"white"}})}),(0,s.jsx)("button",{onClick:O,style:{width:72,height:72,borderRadius:"50%",background:"white",border:"4px solid rgba(255,255,255,0.4)",cursor:"pointer",boxShadow:"0 0 20px rgba(255,255,255,0.3)",transition:"transform 0.1s"},onPointerDown:e=>e.currentTarget.style.transform="scale(0.9)",onPointerUp:e=>e.currentTarget.style.transform="scale(1)"})]}),(0,s.jsxs)("div",{style:{position:"absolute",top:0,left:0,right:0,padding:"48px 20px 16px",background:"linear-gradient(rgba(0,0,0,0.7), transparent)",textAlign:"center"},children:[(0,s.jsxs)("div",{style:{color:"white",fontSize:14,fontWeight:700},children:["ðŸ“¸ ",y?.flat?`Flat ${y.flat}`:"Area"," â€” ",y?.taskType]}),(0,s.jsx)("div",{style:{color:"rgba(255,255,255,0.6)",fontSize:12,marginTop:4},children:"Take a live photo as proof of work"})]})]}):null]})},er=c("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),eo=["Floor Cleaner Liquid","Garbage Bags (Large)","Heavy Broom","Glass Detergent","Mop Refills","Disinfectant Spray"],ed=({currentUser:e,requests:t,onRequest:i,staffMembers:a})=>{let[l,r]=(0,n.useState)(""),[o,d]=(0,n.useState)(""),[c,h]=(0,n.useState)("LOW");return(0,s.jsxs)("div",{style:{paddingBottom:16},children:[(0,s.jsxs)("div",{className:"animate-in",style:{marginBottom:20},children:[(0,s.jsx)("div",{className:"section-header",children:(0,s.jsx)("span",{className:"section-title",children:"Quick Request"})}),(0,s.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:eo.map(e=>(0,s.jsx)("button",{onClick:()=>r(e),style:{padding:"8px 14px",borderRadius:20,fontSize:12,fontWeight:600,border:"none",cursor:"pointer",fontFamily:"inherit",background:l===e?"var(--green-light)":"var(--bg-card)",color:l===e?"#059669":"var(--text-secondary)",boxShadow:l===e?"var(--neu-inset-sm)":"var(--neu-raised-sm)",transition:"all 0.2s"},children:e},e))})]}),(0,s.jsx)("form",{onSubmit:t=>{t.preventDefault(),l&&o&&(i({item:l,quantity:o,urgency:c,status:"OPEN",requesterId:e,timestamp:Date.now()}),r(""),d(""),h("LOW"))},children:(0,s.jsxs)("div",{className:"neu-card animate-in animate-in-delay-1",style:{marginBottom:20,padding:22},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:18,paddingBottom:14,borderBottom:"1px solid var(--neu-dark)"},children:[(0,s.jsx)("div",{style:{width:38,height:38,borderRadius:12,background:"var(--coral)",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:(0,s.jsx)(x,{size:16})}),(0,s.jsx)("span",{style:{fontSize:15,fontWeight:700,color:"var(--text-primary)"},children:"New Request"})]}),(0,s.jsxs)("div",{className:"neu-input-group",style:{marginBottom:14},children:[(0,s.jsx)("label",{className:"neu-label",children:"Item Name"}),(0,s.jsx)("div",{className:"neu-input-wrapper",children:(0,s.jsx)("input",{type:"text",className:"neu-input",value:l,onChange:e=>r(e.target.value),placeholder:"e.g. Floor Cleaner Liquid"})})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:18},children:[(0,s.jsxs)("div",{className:"neu-input-group",style:{flex:1},children:[(0,s.jsx)("label",{className:"neu-label",children:"Quantity"}),(0,s.jsx)("div",{className:"neu-input-wrapper",children:(0,s.jsx)("input",{type:"text",className:"neu-input",value:o,onChange:e=>d(e.target.value),placeholder:"e.g. 5 Liters"})})]}),(0,s.jsxs)("div",{className:"neu-input-group",style:{width:110},children:[(0,s.jsx)("label",{className:"neu-label",children:"Urgency"}),(0,s.jsx)("div",{className:"neu-input-wrapper",children:(0,s.jsxs)("select",{value:c,onChange:e=>h(e.target.value),className:"neu-input",style:{cursor:"pointer",appearance:"none"},children:[(0,s.jsx)("option",{value:"LOW",children:"Low"}),(0,s.jsx)("option",{value:"MEDIUM",children:"Med"}),(0,s.jsx)("option",{value:"HIGH",children:"High"})]})})]})]}),(0,s.jsxs)("button",{type:"submit",disabled:!l||!o,className:"btn btn-coral",style:{width:"100%",padding:"14px",fontSize:14,fontWeight:700,borderRadius:14,opacity:l&&o?1:.5,display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[(0,s.jsx)(er,{size:16})," Submit Request"]})]})}),(0,s.jsxs)("div",{className:"animate-in animate-in-delay-2",children:[(0,s.jsx)("div",{className:"section-header",children:(0,s.jsx)("span",{className:"section-title",children:"Recent Requests"})}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[t.slice().reverse().map(e=>(0,s.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 18px"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)"},children:e.item}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:4},children:[(0,s.jsx)("span",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)",background:"var(--bg-card)",boxShadow:"var(--neu-inset-sm)",padding:"2px 10px",borderRadius:8},children:e.quantity}),(0,s.jsx)("span",{style:{fontSize:12,fontWeight:600,color:"HIGH"===e.urgency?"var(--coral)":"MEDIUM"===e.urgency?"var(--yellow)":"var(--text-muted)"},children:e.urgency})]}),(0,s.jsxs)("div",{style:{fontSize:11,color:"var(--text-muted)",marginTop:4},children:["By ",a.find(t=>t.id===e.requesterId)?.name||"Staff"]})]}),(0,s.jsx)("div",{children:"FULFILLED"===e.status?(0,s.jsxs)("span",{className:"badge badge-green",style:{gap:4},children:[(0,s.jsx)(q,{size:12})," Done"]}):(0,s.jsxs)("span",{className:"badge badge-yellow",style:{gap:4},children:[(0,s.jsx)(j,{size:12})," Open"]})})]},e.id)),0===t.length&&(0,s.jsx)("div",{className:"neu-card-inset",style:{textAlign:"center",padding:"32px 20px",color:"var(--text-muted)",fontSize:13,fontWeight:500,fontStyle:"italic"},children:"No supply requests yet."})]})]})]})},ec=({type:e,label:t})=>(0,s.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",gap:14,padding:"16px 18px"},children:[(0,s.jsx)("div",{style:{width:42,height:42,borderRadius:14,background:"IN"===e?"var(--green-light)":"var(--coral-light)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"IN"===e?(0,s.jsx)(M,{size:18,color:"#10b981"}):(0,s.jsx)(f,{size:18,color:"#f97066"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)"},children:t}),(0,s.jsx)("div",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)"},children:"IN"===e?"Clocked in":"Clocked out"})]})]}),eh=({currentUser:e,punchLogs:t,onPunch:i,staffMembers:a})=>{let[l,r]=(0,n.useState)(new Date),o=a.find(t=>t.id===e);(0,n.useEffect)(()=>{let e=setInterval(()=>r(new Date),1e3);return()=>clearInterval(e)},[]);let d=t.filter(t=>t.staffId===e&&t.timestamp>=new Date().setHours(0,0,0,0)).sort((e,t)=>t.timestamp-e.timestamp),c=d[0],h=c?.type==="IN",p=(()=>{let e=0,t=[...d].sort((e,t)=>e.timestamp-t.timestamp);for(let i=0;i<t.length;i++)"IN"===t[i].type&&(e+=(t[i+1]?.type==="OUT"?t[i+1].timestamp:Date.now())-t[i].timestamp);let i=Math.floor(e/6e4);return{hours:Math.floor(i/60),minutes:i%60}})(),x=Math.min(100,Math.round((60*p.hours+p.minutes)/480*100)),m=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),g=2*Math.PI*92;return(0,s.jsxs)("div",{style:{paddingBottom:16},children:[(0,s.jsxs)("div",{className:"animate-in",style:{textAlign:"center",marginBottom:28},children:[(0,s.jsx)("div",{style:{fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:"var(--text-muted)",marginBottom:4},children:"STAFF ATTENDANCE"}),(0,s.jsx)("h2",{style:{fontSize:22,fontWeight:800,color:"var(--text-primary)"},children:o?.name||"Staff"})]}),(0,s.jsx)("div",{className:"animate-in animate-in-delay-1",style:{display:"flex",justifyContent:"center",marginBottom:36},children:(0,s.jsxs)("button",{onClick:()=>{i({staffId:e,type:h?"OUT":"IN",timestamp:Date.now()})},className:`neu-punch-btn ${h?"punch-out":"punch-in"}`,children:[h?(0,s.jsx)(f,{size:36}):(0,s.jsx)(M,{size:36}),(0,s.jsx)("span",{style:{fontSize:18,fontWeight:800,textTransform:"uppercase",letterSpacing:1.5},children:h?"PUNCH OUT":"PUNCH IN"})]})}),(0,s.jsxs)("div",{className:"neu-card-inset animate-in animate-in-delay-2",style:{marginBottom:24,textAlign:"center",padding:28},children:[(0,s.jsx)("div",{style:{fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:"var(--text-muted)",marginBottom:16},children:"HOURS WORKED TODAY:"}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:12},children:(0,s.jsxs)("div",{className:"progress-ring-container",style:{width:200,height:200},children:[(0,s.jsxs)("svg",{width:200,height:200,style:{transform:"rotate(-90deg)"},children:[(0,s.jsx)("circle",{cx:100,cy:100,r:92,fill:"none",stroke:"var(--neu-dark)",strokeWidth:16}),(0,s.jsx)("circle",{cx:100,cy:100,r:92,fill:"none",stroke:"url(#attendanceGradient)",strokeWidth:16,strokeDasharray:g,strokeDashoffset:g-x/100*g,strokeLinecap:"round",style:{transition:"stroke-dashoffset 1s ease-out"}}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"attendanceGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#3b82f6"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#1d4ed8"})]})})]}),(0,s.jsxs)("div",{style:{position:"absolute",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,s.jsx)("div",{style:{width:40,height:40,borderRadius:"50%",background:"var(--blue-light)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:8},children:(0,s.jsx)(j,{size:18,color:"#3b82f6"})}),(0,s.jsxs)("div",{style:{fontSize:28,fontWeight:800,color:"var(--text-primary)",lineHeight:1},children:[p.hours,"h ",p.minutes.toString().padStart(2,"0"),"m"]}),(0,s.jsx)("div",{style:{fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:.5,color:"var(--text-muted)",marginTop:4},children:"PROGRESS"})]})]})})]}),(0,s.jsxs)("div",{className:"animate-in animate-in-delay-3",children:[(0,s.jsx)("div",{className:"section-header",children:(0,s.jsx)("span",{className:"section-title",children:"Recent Logs"})}),(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:0===d.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ec,{type:"IN",time:"9:00 AM",label:"Punch In: 9:00 AM"}),(0,s.jsx)(ec,{type:"OUT",time:"1:00 PM",label:"Punch Out: 1:00 PM"}),(0,s.jsx)(ec,{type:"IN",time:"2:00 PM",label:"Punch In: 2:00 PM"})]}):d.map(e=>(0,s.jsx)(ec,{type:e.type,time:m(e.timestamp),label:`Punch ${"IN"===e.type?"In":"Out"}: ${m(e.timestamp)}`},e.id))})]})]})},ep=c("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),ex=c("wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]),em=c("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),eg=c("car-front",[["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]),eu=c("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),ey=c("gallery-vertical-end",[["path",{d:"M7 2h10",key:"nczekb"}],["path",{d:"M5 6h14",key:"u2x4p"}],["rect",{width:"18",height:"12",x:"3",y:"10",rx:"2",key:"l0tzu3"}]]),ef=c("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),ev=c("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),ej=c("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),eb=({icon:e,count:t,label:i,color:a})=>(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},children:[(0,s.jsx)("div",{style:{width:36,height:36,borderRadius:12,background:"var(--bg-card)",boxShadow:"var(--neu-raised-sm)",display:"flex",alignItems:"center",justifyContent:"center",color:a},children:e}),(0,s.jsx)("div",{style:{fontSize:16,fontWeight:800,color:"var(--text-primary)"},children:t}),(0,s.jsx)("div",{style:{fontSize:10,fontWeight:600,color:"var(--text-muted)"},children:i})]}),ek=({currentUser:e,logs:t,staffMembers:i})=>{let a=(0,n.useMemo)(()=>t.filter(t=>t.staffId===e).sort((e,t)=>t.timestamp-e.timestamp),[t,e]),l=new Date().setHours(0,0,0,0),r=new Date().setDate(new Date().getDate()-7),o=(0,n.useMemo)(()=>{let e=a.filter(e=>e.timestamp>=l).length,t=a.filter(e=>e.timestamp>=r).length,i=a.filter(e=>e.taskId.includes("garbage")||e.taskId.includes("trash")).length,s=a.filter(e=>e.taskId.includes("broom")||e.taskId.includes("sweep")).length,n=a.filter(e=>e.taskId.includes("mop")).length,o=a.length-i-s-n;return{todayCount:e,weekCount:t,breakdown:{garbage:i,brooming:s,mopping:n,other:o}}},[a,l,r]),d=(0,n.useMemo)(()=>{let e={};return a.forEach(t=>{let i=new Date(t.timestamp).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"});e[i]||(e[i]=[]),e[i].push(t)}),e},[a]);return(0,s.jsxs)("div",{className:"animate-in",children:[(0,s.jsxs)("div",{className:"section-header",children:[(0,s.jsx)("span",{className:"section-title",children:"Performance Overview"}),(0,s.jsx)("span",{className:"section-label",children:"LIVE STATS"})]}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:24},children:[(0,s.jsxs)("div",{className:"neu-card",style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",padding:"20px 16px"},children:[(0,s.jsx)("div",{style:{width:48,height:48,borderRadius:"50%",background:"var(--green-light)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:12,color:"var(--green)"},children:(0,s.jsx)(ef,{size:24})}),(0,s.jsx)("div",{style:{fontSize:24,fontWeight:800,color:"var(--text-primary)",lineHeight:1.2},children:o.todayCount}),(0,s.jsx)("div",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",textTransform:"uppercase",marginTop:4},children:"Tasks Today"})]}),(0,s.jsxs)("div",{className:"neu-card",style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",padding:"20px 16px"},children:[(0,s.jsx)("div",{style:{width:48,height:48,borderRadius:"50%",background:"var(--blue-light)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:12,color:"var(--blue)"},children:(0,s.jsx)(ev,{size:24})}),(0,s.jsx)("div",{style:{fontSize:24,fontWeight:800,color:"var(--text-primary)",lineHeight:1.2},children:o.weekCount}),(0,s.jsx)("div",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",textTransform:"uppercase",marginTop:4},children:"Tasks This Week"})]})]}),(0,s.jsxs)("div",{className:"neu-card-inset",style:{padding:20,marginBottom:24},children:[(0,s.jsx)("div",{className:"section-header",style:{marginBottom:16},children:(0,s.jsx)("span",{className:"section-label",children:"WORK BREAKDOWN"})}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[(0,s.jsx)(eb,{icon:(0,s.jsx)(ep,{size:16}),count:o.breakdown.garbage,label:"Garbage",color:"var(--red)"}),(0,s.jsx)(eb,{icon:(0,s.jsx)(ex,{size:16}),count:o.breakdown.brooming,label:"Brooming",color:"var(--orange)"}),(0,s.jsx)(eb,{icon:(0,s.jsx)(eu,{size:16}),count:o.breakdown.mopping,label:"Mopping",color:"var(--blue)"})]})]}),(0,s.jsx)("div",{className:"section-header",children:(0,s.jsx)("span",{className:"section-title",children:"Activity History"})}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[Object.entries(d).map(([e,t])=>(0,s.jsxs)("div",{className:"animate-in",children:[(0,s.jsx)("div",{style:{fontSize:12,fontWeight:700,color:"var(--text-muted)",textTransform:"uppercase",marginBottom:12,letterSpacing:.5,paddingLeft:4},children:e===new Date().toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})?"Today":e}),(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:t.map(e=>{var t,i;return(0,s.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",gap:14,padding:"14px 16px",borderRadius:16},children:[(0,s.jsx)("div",{style:{fontSize:22},children:(e=>{let t={width:20,height:20};switch(e){case E.GARBAGE_COLLECTION:return(0,s.jsx)(ep,{style:{...t,color:"#ef4444"}});case E.BROOMING:return(0,s.jsx)(ex,{style:{...t,color:"#f97316"}});case E.MOPPING:return(0,s.jsx)(em,{style:{...t,color:"#3b82f6"}});case E.DRIVEWAY:return(0,s.jsx)(eg,{style:{...t,color:"#64748b"}});case E.GLASS_CLEANING:return(0,s.jsx)(eu,{style:{...t,color:"#06b6d4"}});case E.STAIRCASE:return(0,s.jsx)(ey,{style:{...t,color:"#8b5cf6"}});default:return(0,s.jsx)(eu,{style:{...t,color:"#94a3b8"}})}})((t=e.taskId).includes("garbage")?E.GARBAGE_COLLECTION:t.includes("broom")?E.BROOMING:t.includes("mop")?E.MOPPING:t.includes("glass")?E.GLASS_CLEANING:t.includes("driveway")?E.DRIVEWAY:E.GLASS_CLEANING)}),(0,s.jsxs)("div",{style:{flex:1},children:[(0,s.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)"},children:(i=e.taskId).includes("garbage")?"Garbage Collection":i.includes("broom")?"Brooming":i.includes("mop")?"Mopping":i.includes("glass")?"Glass Cleaning":i.includes("driveway")?"Driveway Cleaning":"Task Completed"}),(0,s.jsxs)("div",{style:{fontSize:11,fontWeight:500,color:"var(--text-muted)",display:"flex",gap:6},children:[(0,s.jsx)("span",{children:new Date(e.timestamp).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0})}),(0,s.jsx)("span",{children:"Â·"}),(0,s.jsxs)("span",{children:["Block ",e.block?String.fromCharCode(64+e.block):"-",void 0!==e.floor?`, Floor ${e.floor}`:""]})]})]}),(0,s.jsx)("div",{style:{width:24,height:24,borderRadius:"50%",background:"var(--green-light)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--green)"},children:(0,s.jsx)(ej,{size:14})})]},e.id)})})]},e)),0===a.length&&(0,s.jsxs)("div",{style:{textAlign:"center",padding:"40px 0",color:"var(--text-muted)"},children:[(0,s.jsx)("div",{style:{fontSize:40,marginBottom:10},children:"ðŸ“œ"}),(0,s.jsx)("div",{style:{fontWeight:600},children:"No logs found"}),(0,s.jsx)("div",{style:{fontSize:12},children:"Get started by completing tasks!"})]})]})]})},eS=({icon:e,label:t,active:i,onClick:a})=>(0,s.jsxs)("button",{className:`nav-item ${i?"active":""}`,onClick:a,children:[e,(0,s.jsx)("span",{children:t})]}),eN=()=>{let{isLoggedIn:e,role:t,staffId:i,staffName:a,loading:l,logout:r}=(0,N.useAuth)(),[o,d]=(0,n.useState)(1),[c,b]=(0,n.useState)("HOME"),[k,w]=(0,n.useState)("TASKS"),[z,C]=(0,n.useState)(!1),[I,M]=(0,n.useState)(new Date);(0,n.useEffect)(()=>{let e=setInterval(()=>M(new Date),1e3);return()=>clearInterval(e)},[]);let[A,T]=(0,n.useState)([]),[W,D]=(0,n.useState)([]),[E,R]=(0,n.useState)([]),[F,O]=(0,n.useState)([]),[P,$]=(0,n.useState)(!1);(0,n.useEffect)(()=>{i&&d(i)},[i]),(0,n.useEffect)(()=>{e&&($(!0),Promise.all([(0,B.fetchStaffMembers)().catch(()=>[]),(0,B.fetchTaskLogs)().catch(()=>[]),(0,B.fetchPunchLogs)().catch(()=>[]),(0,B.fetchSupplyRequests)().catch(()=>[])]).then(([e,t,i,a])=>{T(e),D(t),O(i),R(a),$(!1)}))},[e]);let H=async e=>{try{let t=await (0,B.insertTaskLog)(e);D(e=>[t,...e])}catch{let t={...e,id:Math.random().toString(36).substr(2,9)};D(e=>[t,...e])}},G=async e=>{try{let t=await (0,B.insertSupplyRequest)(e);R(e=>[t,...e])}catch{let t={...e,id:Math.random().toString(36).substr(2,9)};R(e=>[t,...e])}},q=async e=>{try{await (0,B.updateSupplyStatus)(e,"FULFILLED")}catch{}R(t=>t.map(t=>t.id===e?{...t,status:"FULFILLED"}:t))},U=async e=>{try{let t=await (0,B.insertPunchLog)(e);O(e=>[t,...e])}catch{let t={...e,id:Math.random().toString(36).substr(2,9)};O(e=>[t,...e])}};if(l)return(0,s.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg)"},children:(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)(v,{size:40,className:"spin",style:{color:"var(--blue)",marginBottom:16}}),(0,s.jsx)("div",{style:{fontSize:14,fontWeight:600,color:"var(--text-muted)"},children:"Loading..."})]})});if(!e)return(0,s.jsx)(L,{});let _="admin"===t,V=a||"User",K=()=>_?"HOME"===c?"MANAGEMENT":"STAFF"===c?"STAFF ATTENDANCE":"":"ATTENDANCE"===k?"STAFF ATTENDANCE":V;return(0,s.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",maxWidth:430,margin:"0 auto",position:"relative"},children:[(0,s.jsxs)("header",{className:"app-header",children:[(0,s.jsxs)("div",{children:[K()&&(0,s.jsx)("div",{style:{fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:"var(--text-muted)",marginBottom:2},children:K()}),(0,s.jsx)("h1",{style:{fontSize:22,fontWeight:800,color:"var(--text-primary)",lineHeight:1.2,whiteSpace:"pre-line"},children:_?"HOME"===c?"Admin\nManagement Hub":"STAFF"===c?"Staff Attendance":"STOCK"===c?"Supplies":"Reports":"ATTENDANCE"===k?"Staff Attendance":"STOCK"===k?"Supplies":"My Tasks"}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,marginTop:6},children:[(0,s.jsx)(j,{size:13,style:{color:"var(--text-muted)"}}),(0,s.jsxs)("span",{style:{fontSize:12,fontWeight:600,color:"var(--text-secondary)",fontVariantNumeric:"tabular-nums"},children:[I.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})," Â· ",I.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})]})]})]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,s.jsx)("button",{className:"neu-dark-toggle",onClick:()=>{C(!z),document.body.classList.toggle("dark-mode")},children:z?(0,s.jsx)(u,{size:18}):(0,s.jsx)(g,{size:18})}),(0,s.jsxs)("button",{className:"neu-logout-btn",onClick:r,children:[(0,s.jsx)(f,{size:14}),(0,s.jsx)("span",{children:"Logout"})]})]})]}),(0,s.jsxs)("main",{style:{flex:1,padding:"0 16px 100px",overflowY:"auto"},children:[(()=>{if(P)return(0,s.jsxs)("div",{style:{textAlign:"center",padding:60},children:[(0,s.jsx)(v,{size:32,className:"spin",style:{color:"var(--blue)"}}),(0,s.jsx)("div",{style:{marginTop:12,fontSize:13,color:"var(--text-muted)"},children:"Loading data..."})]});if(_)switch(c){case"HOME":default:return(0,s.jsx)(Z,{logs:W,tasks:[],supplyRequests:E,onApproveSupply:q,staffMembers:A});case"STAFF":return(0,s.jsx)(eh,{currentUser:o,punchLogs:F,onPunch:U,staffMembers:A});case"STOCK":return(0,s.jsx)(ed,{currentUser:o,requests:E,onRequest:G,staffMembers:A})}switch(k){case"ATTENDANCE":return(0,s.jsx)(eh,{currentUser:o,punchLogs:F,onPunch:U,staffMembers:A});case"STOCK":return(0,s.jsx)(ed,{currentUser:o,requests:E,onRequest:G,staffMembers:A});case"LOGS":return(0,s.jsx)(ek,{currentUser:o,logs:W,staffMembers:A});default:return(0,s.jsx)(el,{currentUser:o,logs:W,onLogTask:H,staffMembers:A})}})(),(0,s.jsx)(S,{})]}),_?(0,s.jsxs)("div",{className:"bottom-nav",children:[(0,s.jsx)(eS,{icon:(0,s.jsx)(h,{size:22}),label:"Home",active:"HOME"===c,onClick:()=>b("HOME")}),(0,s.jsx)(eS,{icon:(0,s.jsx)(p,{size:22}),label:"Staff",active:"STAFF"===c,onClick:()=>b("STAFF")}),(0,s.jsx)(eS,{icon:(0,s.jsx)(x,{size:22}),label:"Stock",active:"STOCK"===c,onClick:()=>b("STOCK")}),(0,s.jsx)(eS,{icon:(0,s.jsx)(m,{size:22}),label:"Logs",active:"LOGS"===c,onClick:()=>b("LOGS")})]}):(0,s.jsxs)("div",{className:"bottom-nav",children:[(0,s.jsx)(eS,{icon:(0,s.jsx)(y,{size:22}),label:"Tasks",active:"TASKS"===k,onClick:()=>w("TASKS")}),(0,s.jsx)(eS,{icon:(0,s.jsx)(p,{size:22}),label:"Staff",active:"ATTENDANCE"===k,onClick:()=>w("ATTENDANCE")}),(0,s.jsx)(eS,{icon:(0,s.jsx)(x,{size:22}),label:"Stock",active:"STOCK"===k,onClick:()=>w("STOCK")}),(0,s.jsx)(eS,{icon:(0,s.jsx)(m,{size:22}),label:"Logs",active:"LOGS"===k,onClick:()=>w("LOGS")})]})]})};function ew(){return(0,s.jsx)(eN,{})}e.s(["default",()=>ew],31713)}]);